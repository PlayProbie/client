# Git Conventions

이 문서는 프로젝트의 Git 워크플로우, 브랜치 전략, 커밋 메시지 규칙을 정의합니다.

---

## Git 워크플로우

1. GitHub Issue 생성
2. 이슈 번호 기반 브랜치 생성
3. 로컬에서 작업 후 커밋
4. 원격 저장소에 Push
5. PR 생성 및 리뷰 요청
6. 코드 리뷰 후 Approve (최소 2명)
7. **Squash Merge**로 병합
8. 브랜치 삭제

---

## 브랜치 전략 (GitHub Flow 기반)

| 브랜치               | 용도                    |
| -------------------- | ----------------------- |
| `main`               | 배포 가능한 안정 버전   |
| `develop`            | 개발 통합 브랜치        |
| `feat/#이슈번호`     | 새로운 기능 개발        |
| `fix/#이슈번호`      | 버그 수정               |
| `refactor/#이슈번호` | 코드 리팩토링           |
| `docs/#이슈번호`     | 문서 작업               |
| `chore/#이슈번호`    | 빌드, 설정 등 기타 작업 |

**예시:**

- `feat/#12` → 12번 이슈의 기능 개발
- `fix/#45` → 45번 이슈의 버그 수정

---

## 커밋 메시지 컨벤션 (Conventional Commits)

### 형식

```
<type>: <subject>

<body>
```

### Type 종류

| Type       | 설명                            |
| ---------- | ------------------------------- |
| `feat`     | 새로운 기능 추가                |
| `fix`      | 버그 수정                       |
| `docs`     | 문서 수정                       |
| `style`    | 코드 포맷팅 (세미콜론, 공백 등) |
| `refactor` | 코드 리팩토링                   |
| `test`     | 테스트 코드 추가/수정           |
| `chore`    | 빌드, 패키지 등 기타 변경       |

### Subject (제목) 규칙

- **50자 이내**로 간결하게 요약
- **동사로 시작** (추가, 수정, 삭제, 개선)
- **마침표 없음**
- 한글/영어 통일 (팀 결정 사항)

### Body (본문) 규칙

- "어떻게"보다 **"무엇을", "왜"** 변경했는지 설명
- 72자마다 줄바꿈
- Subject와 Body 사이에 **빈 줄 필수**
- `-` 또는 `*`로 항목 구분 가능

### 예시

```
feat: 소셜 로그인 기능 추가

- Google OAuth 2.0 연동
- 로그인 상태 유지 기능 구현
```

### ✅ 좋은 예시 vs ❌ 나쁜 예시

| ✅ 좋은 예시                           | ❌ 나쁜 예시                   |
| -------------------------------------- | ------------------------------ |
| `feat: 소셜 로그인 기능 추가`          | `feat: 소셜 로그인 기능 추가.` |
| `fix: 로그인 시 토큰 만료 문제 해결`   | `fix: 버그 수정`               |
| `refactor: UserService 중복 코드 제거` | `refactor: 코드 정리`          |
| `docs: API 명세서 업데이트`            | `update docs`                  |

---

## PR (Pull Request) 규칙

### PR 제목 형식

```
[Type]: 작업 내용 요약
```

### 커밋 단위 가이드

| 원칙      | 설명                              |
| --------- | --------------------------------- |
| 단일 책임 | 하나의 커밋은 하나의 목적만 가짐  |
| 동작 가능 | 각 커밋 시점에서 빌드/테스트 통과 |
| 리뷰 용이 | 커밋별로 리뷰할 수 있는 크기 유지 |

### ✅ 좋은 커밋 예시

```
feat: User 엔티티 및 Repository 추가
feat: 회원가입 API 구현
feat: 회원가입 유효성 검사 추가
test: 회원가입 API 테스트 작성
```

### ❌ 나쁜 커밋 예시

```
feat: 회원가입 기능 구현 (엔티티, API, 테스트 전부 포함)
fix: 오타 수정
fix: 또 오타 수정
wip: 작업 중
```

### 머지 규칙

- **최소 2명 이상 Approve** 필수
- **CI 통과** 필수
- **Squash Merge** 사용

---

## 코드 리뷰 가이드

### 리뷰어 역할

- 24시간 내 리뷰 완료 목표
- 단순 승인보다 건설적 피드백
- 칭찬도 함께!

### Pn 룰 (리뷰 코멘트 우선순위)

| 태그   | 의미                          | GitHub 액션     | 작성자 대응                           |
| ------ | ----------------------------- | --------------- | ------------------------------------- |
| **P1** | 꼭 반영해주세요               | Request changes | 반드시 수정 또는 합리적 의견으로 설득 |
| **P2** | 적극적으로 고려해주세요       | Request changes | 수용 권장, 불가 시 토론               |
| **P3** | 웬만하면 반영해주세요         | Comment         | 수용 또는 이유 설명 / 다음에 반영     |
| **P4** | 반영해도 좋고 넘어가도 좋아요 | Approve         | 반영 여부 고민만 해보면 충분          |
| **P5** | 그냥 사소한 의견이에요        | Approve         | 무시해도 OK                           |

### Pn 룰 예시

```
P1: 여기서 null 체크 없으면 NPE 발생해요!
P2: 이 로직은 Service 레이어로 분리하는 게 좋을 것 같아요.
P3: 변수명을 좀 더 직관적으로 바꿀 수 있을까요?
P4: 여기 Optional을 쓰면 더 깔끔할 것 같아요.
P5: 오 이런 방법도 있군요! 하나 배워갑니다 😄
```

---

## Quick Reference

### 작업 시작

```bash
git checkout develop
git pull origin develop
git checkout -b feat/#이슈번호
```

### 커밋 & 푸시

```bash
git add .
git commit -m "feat: 기능 설명"
git push origin feat/#이슈번호
```

### 머지 후 정리

```bash
git checkout develop
git pull origin develop
git branch -d feat/#이슈번호
```
